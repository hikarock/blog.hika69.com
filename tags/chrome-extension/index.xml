<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Chrome Extension on hikarock blog</title>
    <link>https://blog.hika69.com/tags/chrome-extension/</link>
    <description>Recent content in Chrome Extension on hikarock blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>All rights reserved - 2015</copyright>
    <lastBuildDate>Fri, 27 May 2016 00:20:53 +0900</lastBuildDate>
    <atom:link href="https://blog.hika69.com/tags/chrome-extension/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Chrome 拡張の Inline Installation に対応する</title>
      <link>https://blog.hika69.com/blog/2016/05/27/chrome-extension-inline-install/</link>
      <pubDate>Fri, 27 May 2016 00:20:53 +0900</pubDate>
      
      <guid>https://blog.hika69.com/blog/2016/05/27/chrome-extension-inline-install/</guid>
      <description>

&lt;p&gt;Chrome 拡張を Chrome ウェブストア に遷移せずにインストールできる Inline Installation に対応した時の覚書。&lt;/p&gt;

&lt;h3 id=&#34;オフィシャルのドキュメント:97c4b7edc7ed1d60b05fc5875229f18c&#34;&gt;オフィシャルのドキュメント&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://developer.chrome.com/webstore/inline_installation&#34;&gt;Using Inline Installation - Google Chrome&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;手順:97c4b7edc7ed1d60b05fc5875229f18c&#34;&gt;手順&lt;/h3&gt;

&lt;p&gt;あらかじめ Chrome ウェブストアのデベロッパー ダッシュボードと Google Search Console で、Inline Installation を導入したいウェブサイトを設定する。&lt;/p&gt;

&lt;p&gt;Inline Installation を設置したいサイトの head 内に link タグを挿入する。&lt;code&gt;{itemId}&lt;/code&gt; に該当の拡張機能のURLに含まれるIDを指定する。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;link rel=&amp;quot;chrome-webstore-item&amp;quot; href=&amp;quot;https://chrome.google.com/webstore/detail/{itemId}&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;リンクやボタンなどを押下したタイミングで Inline Installation を実行する。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;$(document).on(&#39;click&#39;, &#39;#install-button&#39;, function(evt) {
    evt.preventDefault();

    if (!(&#39;chrome&#39; in window)) {
        console.log(&#39;拡張機能をインストールするには、Google Chrome をご利用ください&#39;);
        return;
    }

    chrome.webstore.install(&#39;&#39;, function() {
        // successCallback
    }, function(errMessage, code) {
        // failureCallback
        console.log(errMessage, code);
    });
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;インストール済みか判定して表示を変更する:97c4b7edc7ed1d60b05fc5875229f18c&#34;&gt;インストール済みか判定して表示を変更する&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;chrome.app.isInstalled&lt;/code&gt; の値を判定すればよいだけかと思っていたけど、Chrome 拡張機能の場合はこの値は常に false になる。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://stackoverflow.com/questions/18275960/chrome-app-isinstalled-always-returns-false-for-google-chrome-extensions&#34;&gt;chrome.app.isInstalled always returns false for Google Chrome extensions? - Stack Overflow&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;この回答によると &lt;code&gt;isInstalled&lt;/code&gt; が使えるのは Hosted apps の場合のみで、拡張機能の場合は &lt;a href=&#34;https://developer.chrome.com/extensions/content_scripts&#34;&gt;Content Script&lt;/a&gt; で以下のように body に判定用の DOM を挿入しないといけないようだ。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;$(&#39;body&#39;).append($(&#39;&amp;lt;div&amp;gt;&#39;).attr(&#39;id&#39;, &#39;extension-is-installed&#39;));
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;if ($(&#39;#extension-is-installed&#39;).length &amp;gt; 0) {
  $(&#39;#install-button&#39;).css(&#39;display&#39;, &#39;none&#39;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;このようにインストール済みか判定をしないとどうなるかというと、インストール済みでボタンを押下しても初回と同様のダイアログが表示されて、再インストールが実行されるだけ。&lt;/p&gt;

&lt;p&gt;インストール済みの場合に拡張機能のチュートリアルを表示したい、とかでない限りはこの対応はいらない気がする。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Chrome 拡張「シンプル翻訳」を更新</title>
      <link>https://blog.hika69.com/blog/2014/02/24/simple-honyaku/</link>
      <pubDate>Mon, 24 Feb 2014 14:47:27 +0000</pubDate>
      
      <guid>https://blog.hika69.com/blog/2014/02/24/simple-honyaku/</guid>
      <description>&lt;p&gt;Chrome 拡張機能の「&lt;a href=&#34;https://chrome.google.com/webstore/detail/%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E7%BF%BB%E8%A8%B3/pdnmkammncjnifdeclafllianknnoaif&#34;&gt;シンプル翻訳&lt;/a&gt;」を2年ぶりに更新しました。&lt;/p&gt;

&lt;p&gt;素敵なバナーやアイコンは &lt;a href=&#34;https://twitter.com/meganejunkie&#34;&gt;@meganejunkie&lt;/a&gt; 先生に作ってもらいました (ありがとうございます) 。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dl.dropboxusercontent.com/u/459142/img/blog/simple-honyaku-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dl.dropboxusercontent.com/u/459142/img/blog/simple-honyaku-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;利用しているAPIを変更しましたが機能的にはほぼ変わっていません。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Google翻訳APIから、Bing Translator APIに変更&lt;/li&gt;
&lt;li&gt;オプションから個別にBing Application IDが設定可能に&lt;/li&gt;
&lt;li&gt;翻訳結果の読み上げ機能(英語のみ)を追加&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;https://dl.dropboxusercontent.com/u/459142/img/blog/simple-honyaku-3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;デフォルトだと一つのBing Application IDをみんなで使いまわすので、API制限かかるかもしれません。
なので一応「オプション」画面から個別にBing Application IDを上書きできるようにしています。&lt;/p&gt;

&lt;p&gt;インストールはこちらから。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://chrome.google.com/webstore/detail/%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E7%BF%BB%E8%A8%B3/pdnmkammncjnifdeclafllianknnoaif&#34;&gt;Chrome ウェブストア - シンプル翻訳&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ソースは&lt;a href=&#34;https://github.com/hikarock/simple_honyaku&#34;&gt;GitHub&lt;/a&gt;に置いてます。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>